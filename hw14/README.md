### Модульные тесты

#### Бэк

##### Поле card_holder
1. Если card_holder содержит более одного пробела, то 
тестируемый метод возвращает 400 с сообщением об ошибке;
2. Если card_holder содержит символы подподающие под регулярное выражение [^A-Za-z\ \-], 
т.е. не допустмые символы, то тестируемый метод возвращает 400 с сообщением об ошибке; 
3. Если card_holder не содержит имя и фамилию, то 
тестируемый метод возвращает 400 с сообщением об ошибке;   
4. Если в card_holder имеется дефис и он не разделяет два слова, то 
тестируемый метод возвращает 400 с сообщением об ошибке;   
5. Если в card_holder содержится слишком большое значение, например, 300 символов, то 
тестируемый метод возвращает 400 с сообщением об ошибке;  

##### Поле card_number

1. Если card_number содержит не только цифры, то тестируемый метод возвращает 400 с сообщением об ошибке;
2. Если card_number не содержит 16 цифр, то тестируемый метод возвращает 400 с сообщением об ошибке;
  
##### Поле card_expiration

1. Если card_expiration содержит не только  "/" и цифры [0-9], то тестируемый метод возвращает 400 с сообщением об ошибке;
2. Если месяц в card_expiration содержит число меньшее 1 , то тестируемый метод возвращает 400 с сообщением об ошибке;
3. Если месяц в card_expiration содержит число большее 12 , то тестируемый метод возвращает 400 с сообщением об ошибке;
4. Если год в card_expiration содержит число меньшее текущего года , то тестируемый метод возвращает 400 с сообщением об ошибке;
5. Если год в card_expiration содержит число большее 99, то тестируемый метод возвращает 400 с сообщением об ошибке;
  
##### Поле cvv

1. Если cvv содержит не только цифры [0-9], то тестируемый метод возвращает 400 с сообщением об ошибке;
2. Если cvv не содержит только 3 цифры , то тестируемый метод возвращает 400 с сообщением об ошибке;
  
##### Поле order_number

1. Если order_number содержит не только допустимые символы [a-z0-9], то тестируемый метод возвращает 400 с сообщением об ошибке;
2. Если order_number содержит меньше 1 символа, то тестируемый метод возвращает 400 с сообщением об ошибке;
3. Если order_number содержит больше 16 символов, то тестируемый метод возвращает 400 с сообщением об ошибке;
  
##### Поле sum

1. Если sum содержит не только допустимые символы [0-9,], то тестируемый метод возвращает 400 с сообщением об ошибке;
2. Если sum содержит знак дробной части [,] но дробная часть не указана, то тестируемый метод возвращает 400 с сообщением об ошибке;
3. Если sum содержит в целой части 0 и нет знака дробной части [,] то тестируемый метод возвращает 400 с сообщением об ошибке;
4. Если sum содержит в целой части 0 и есть знак дробной части [,] но дробная часть не указана, то тестируемый метод возвращает 400 с сообщением об ошибке;
5. Если sum содержит в целой части 0 и есть знак дробной части [,] но в дробной части указаны только 0, то тестируемый метод возвращает 400 с сообщением об ошибке;

##### Успешность валидации

1. Если отправлены валидные данные, то не выбрасываются исключения и не возвращается код ответа 400
 
#### Репозиторий

##### Проверка метода setOrderIsPaid(string $orderNumber, float $sum): bool

1. Если методу setOrderIsPaid передан пустой аргумент $orderNumber, выбросить исключение OrderProcessArgumentException;
2. Если методу setOrderIsPaid передан пустой аргумент $sum, выбросить исключение OrderProcessArgumentException;
3. Если методу setOrderIsPaid в аргумент $orderNumber передана не строка, выбросить исключение OrderProcessArgumentException;
4. Если методу setOrderIsPaid в аргумент $orderNumber передано не вещественное число, выбросить исключение OrderProcessArgumentException;
5. Если метод setOrderIsPaid вернул не boolean значение, выбросить исключение OrderProcessException;
6. Если метод setOrderIsPaid вернул false, выбросить исключение OrderProcessException;

##### Успешность выполнения setOrderIsPaid

1. Если метод setOrderIsPaid выполнен без ошибок должен вернуть true;

### Интеграционное тестирование

#### Связка «фронт-бэк»:

1. При отправке не валидных данных поля card_number, после получения ответа от сервера, поле card_number
 подсвечивается красным цветом и над полем появляется сообщение об ошибке;
2. При отправке не валидных данных поля card_holder, после получения ответа от сервера, поле card_holder
 подсвечивается красным цветом и над полем появляется сообщение об ошибке;
3. При отправке не валидных данных поля card_expiration, после получения ответа от сервера, поле card_expiration
 подсвечивается красным цветом и над полем появляется сообщение об ошибке;
4. При отправке не валидных данных поля cvv, после получения ответа от сервера, поле cvv
 подсвечивается красным цветом и над полем появляется сообщение об ошибке;
5. При отправке не валидных данных поля order_number, после получения ответа от сервера, поле order_number
 подсвечивается красным цветом и над полем появляется сообщение об ошибке;
6. При отправке не валидных данных поля sum, после получения ответа от сервера, поле sum
 подсвечивается красным цветом и над полем появляется сообщение об ошибке;
7. При нажатии кнопки Отправить данные отправляются на бэк модуль и бэк модуль отправляет ответ;

#### Связка «бэк-сервис А»:

1. Бэк отправляет запрос на сервис А, сервис А не смог списать деньги и отправляет ответ с кодом 403;
2. Бэк отправляет запрос на сервис А, сервис А смог списать деньги и отправляет ответ с кодом 200;

#### Связка «бэк-репозиторий»:

1. Бэк запускает метод репозитория setOrderIsPaid с невалидным значением аргумента $orderNumber, выбросывается исключение OrderProcessArgumentException;
2. Бэк запускает метод репозитория setOrderIsPaid с невалидным значением аргумента $sum, выбросывается исключение OrderProcessArgumentException;
3. Бэк запускает метод репозитория setOrderIsPaid с валидными значениеми аргументов, репозиторий возвращает true;

### Системное тестирование:

1. Фронт отправляет не валидное поле card_number на бэк, бэк возвращает ответ с кодом 400, фронт подсвечивает 
поле card_number красным цветом и выводит над ним сообщение с ошибкой "Поле card_number заполнено не верно";
2. Фронт отправляет валидный запрос на бэк, бэк отправляет запрос на сервис А, сервис А не примает данные карты и 
не пропускает платеж, и отправляет ошибку 403 на бэк, бэк отправляет на фронт ответ с кодом 403 и сообщеним об ошибке 
при авторизации карты, фронт выводит сообщение об ошибке в красной рамке над формой.
3. Фронт отправляет валидный запрос на бэк, бэк отправляет запрос на сервис А, при успешном выполнении сервис А
отправляет ответ с кодом 200 на бэк, бэк для сохранения данных об оплате вызывает метод setOrderIsPaid репозитория, 
репозиторий не смог сохранить данные об оплате, выбрасывает исключение OrderProcessException, бэк отправляет на фронт,
сообщение с кодом 500, фронт отображает сообщение в красной рамке 
"Во время оплаты вознилка ошибка, мы свяжемся с Вами в ближайшее время";
4. Фронт отправляет валидный запрос на бэк, бэк отправляет запрос на сервис А, при успешном выполнении сервис А
отправляет ответ с кодом 200 на бэк, бэк для сохранения данных об оплате вызывает метод setOrderIsPaid репозитория, 
репозиторий успешно сохраняет данные об оплате и возвращает true на бэк, бэк отправляет на фронт,
сообщение с кодом 200, фронт отображает сообщение в зеленой рамке 
"Оплата прошла успешно. Заказ отправляется в обработку";
